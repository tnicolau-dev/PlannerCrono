<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Projetos</title>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="../../css/theme.css">
  <link rel="stylesheet" href="../../css/style.css">
</head>

<body>
  <div class="conteudo_form">
    <h1>Lista de projetos</h1>

    <div class="box">
      <div class="filter">
        <button class="button btn_default" onclick="document.getElementById('filter_fields').showModal()">
          <span class="material-symbols-outlined">filter_alt</span>
          Filtro
        </button>
        <button class="button btn_ok" onclick="document.getElementById('insert_fileds').showModal()">
          <span class="material-symbols-outlined">add</span>
          Novo projeto
        </button>
      </div>

      <span id="error_get" class="inactive">Nenhum dado encontrado!</span>
      <div id="tabela_result">
        <table id="dataTable">
          <thead>
            <tr>
              <th></th>
              <th></th>
              <th>Registro</th>
              <th>Código</th>
              <th>Nome</th>
              <th>Descrição</th>
              <th>Tarefas</th>
              <th>Status</th>
              <th>Cor</th>
              <th>Início</th>
              <th>Fim</th>
            </tr>
          </thead>
          <tbody id="grid"></tbody>
        </table>
      </div>

      <div class="pagination" id="pagination"></div>


      <dialog id="filter_fields">
        <div class="filter_ajust header_field">
          <h2>Filtro</h2>
          <button class="button btn_ok" onclick="closeModal('filter_fields')"><span
              class="material-symbols-outlined">close</span></button>
        </div>
        <div class="input_field">
          <input type="text" value="" name="projeto_nome" placeholder="Nome do projeto">
          <select class="input" name="status_legivel">
            <option value="" selected>Selecione um status</option>
            <option value="Não iniciado">Não iniciado</option>
            <option value="Em progresso">Em progresso</option>
            <option value="Finalizado">Finalizado</option>
          </select>
          <select name="sort_id" id="sort_id">
            <option value="">Sem ordenação</option>
            <option value="asc">Mais antigo</option>
            <option value="desc">Mais recente</option>
          </select>
        </div>
        <div class="filter_ajust button_field">
          <button class="button btn_default" onclick="applyFilter('filter_fields', 'grid')"><span
              class="material-symbols-outlined">filter_alt</span>Aplicar</button>
          <button class="button btn_ok" onclick="clearFilter('filter_fields', 'grid')"><span
              class="material-symbols-outlined">filter_alt_off</span>Limpar</button>
        </div>
      </dialog>

      <dialog id="insert_fileds">
        <div class="filter_ajust header_field">
          <h2>Novo projeto</h2>
          <button class="button btn_ok" onclick="closeModal('insert_fileds')"><span
              class="material-symbols-outlined">close</span></button>
        </div>
        <div class="input_field">
          <input type="text" value="" name="projeto_nome" placeholder="Nome do projeto" required>
          <textarea value="" name="projeto_descricao" placeholder="Descrição do projeto"></textarea>
          <input value="" type="date" name="dt_ini_projeto" required>
          <input value="" type="color" name="projeto_cor" required>
          <input type="hidden" value="" name="codigo_projeto" id="codigo_projeto">
        </div>
        <div class="error">
          <span></span>
        </div>
        <div class="filter_ajust button_field">
          <button class="button btn_default" onclick="postData('insert_fileds', 'projetos')"><span
              class="material-symbols-outlined">save</span>Salvar</button>
          <button class="button btn_ok" onclick="closeModal('insert_fileds')">Cancelar</button>
        </div>
      </dialog>

      <dialog id="update_fileds">
        <div class="filter_ajust header_field">
          <h2>Editar projeto</h2>
          <button class="button btn_ok" onclick="closeModal('update_fileds')"><span
              class="material-symbols-outlined">close</span></button>
        </div>
        <div class="input_field">
          <input type="text" value="" name="projeto_nome" placeholder="Nome do projeto" required>
          <textarea value="" name="projeto_descricao" placeholder="Descrição do projeto"></textarea>
          <input value="" type="date" name="dt_ini_projeto" required>
          <input type="hidden" value="" name="id">
          <input value="" type="color" name="projeto_cor" required>
        </div>
        <div class="error">
          <span></span>
        </div>
        <div class="filter_ajust button_field">
          <button class="button btn_default" onclick="putData('update_fileds', 'projetos')"><span
              class="material-symbols-outlined">save</span>Salvar</button>
          <button class="button btn_ok" onclick="closeModal('update_fileds')">Cancelar</button>
        </div>
      </dialog>

      <dialog id="delete_fileds">
        <div class="filter_ajust header_field">
          <h2>Tem certeza que deseja excluir esse projeto?</h2>
        </div>
        <div class="input_field">
          <input class="inp_readonly" type="text" value="" name="projeto_nome" readonly>
          <input type="hidden" value="" name="id">
        </div>
        <div class="error">
          <span></span>
        </div>
        <div class="filter_ajust button_field">
          <button class="button btn_alert" onclick="deleteData('delete_fileds', 'projetos')"><span
              class="material-symbols-outlined">Delete</span>Excluir</button>
          <button class="button btn_ok" onclick="document.getElementById('delete_fileds').close()">Cancelar</button>
        </div>
      </dialog>

    </div>
  </div>
  <script>
    document.getElementById('codigo_projeto').value = [...Array(15)].map(() => {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
      return chars.charAt(Math.floor(Math.random() * chars.length));
    }).join('');
  </script>
</body>

<script src="../../js/script.js"></script>
<script>getTable('projetos');</script>

</html>